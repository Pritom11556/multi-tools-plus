<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BMI Calculator - Multi-Tools Hub</title>
    <meta name="description" content="Free online BMI calculator. Calculate your Body Mass Index, get health insights, and find your ideal weight range.">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="../css/style.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Chart.js for BMI visualization -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Header will be dynamically loaded -->
    <div id="header-placeholder"></div>

    <!-- Main Content -->
    <main class="container py-4">
        <div class="tool-container">
            <div class="tool-header">
                <h1><i class="fas fa-weight"></i> BMI Calculator</h1>
                <p class="lead">Calculate your Body Mass Index and get health insights</p>
            </div>

            <div class="row">
                <div class="col-md-8">
                    <div class="calculator-container">
                        <div class="card mb-4">
                            <div class="card-header">
                                <h5 class="mb-0">Measurement System</h5>
                            </div>
                            <div class="card-body">
                                <div class="btn-group mb-3" role="group">
                                    <input type="radio" class="btn-check" name="measurementSystem" id="metricSystem" value="metric" checked>
                                    <label class="btn btn-outline-primary" for="metricSystem">Metric (kg, cm)</label>
                                    <input type="radio" class="btn-check" name="measurementSystem" id="imperialSystem" value="imperial">
                                    <label class="btn btn-outline-primary" for="imperialSystem">Imperial (lbs, in)</label>
                                </div>

                                <div class="row g-3">
                                    <div class="col-md-6">
                                        <label class="form-label" id="weightLabel">Weight (kg)</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="weight" placeholder="Enter weight">
                                            <span class="input-group-text" id="weightUnit">kg</span>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label" id="heightLabel">Height (cm)</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="height" placeholder="Enter height">
                                            <span class="input-group-text" id="heightUnit">cm</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="mt-4">
                                    <button class="btn btn-primary" id="calculateBtn">Calculate BMI</button>
                                    <button class="btn btn-secondary" id="resetBtn">Reset</button>
                                </div>
                            </div>
                        </div>

                        <!-- Results Card -->
                        <div class="card">
                            <div class="card-header">
                                <h5 class="mb-0">Results</h5>
                            </div>
                            <div class="card-body">
                                <div id="resultContainer">
                                    <div class="result-box p-3 rounded text-center mb-4">
                                        <h3 id="bmiValue">--</h3>
                                        <p id="bmiCategory" class="text-muted mb-0">Enter your measurements to calculate BMI</p>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="card mb-3">
                                                <div class="card-header bg-light">
                                                    <h6 class="mb-0">BMI Chart</h6>
                                                </div>
                                                <div class="card-body">
                                                    <canvas id="bmiChart" height="200"></canvas>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="card mb-3">
                                                <div class="card-header bg-light">
                                                    <h6 class="mb-0">Ideal Weight Range</h6>
                                                </div>
                                                <div class="card-body">
                                                    <p id="idealWeightRange" class="mb-0">Enter your measurements to see your ideal weight range</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="card mb-3">
                                        <div class="card-header bg-light">
                                            <h6 class="mb-0">Health Insights</h6>
                                        </div>
                                        <div class="card-body">
                                            <div id="healthInsights">
                                                <p class="mb-0">Enter your measurements to get health insights</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="text-center">
                                        <button class="btn btn-outline-primary btn-sm" id="copyResult">
                                            <i class="fas fa-copy"></i> Copy Results
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4">
                    <div class="info-card">
                        <h4>About BMI Calculator</h4>
                        <p>Body Mass Index (BMI) is a measure of body fat based on height and weight that applies to adult men and women.</p>
                        
                        <h5 class="mt-3">BMI Categories:</h5>
                        <ul>
                            <li><strong>Underweight:</strong> BMI less than 18.5</li>
                            <li><strong>Normal weight:</strong> BMI between 18.5 and 24.9</li>
                            <li><strong>Overweight:</strong> BMI between 25 and 29.9</li>
                            <li><strong>Obese:</strong> BMI 30 or greater</li>
                        </ul>
                        
                        <h5 class="mt-3">Limitations:</h5>
                        <ul>
                            <li>Does not account for muscle mass</li>
                            <li>Does not consider body composition</li>
                            <li>May not be accurate for athletes</li>
                            <li>Does not account for age or gender differences</li>
                        </ul>
                        
                        <div class="alert alert-info mt-3">
                            <i class="fas fa-info-circle"></i> Tip: BMI is just one indicator of health. Consult a healthcare professional for a comprehensive assessment.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer will be dynamically loaded -->
    <div id="footer-placeholder"></div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="../js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const metricSystem = document.getElementById('metricSystem');
            const imperialSystem = document.getElementById('imperialSystem');
            const weightLabel = document.getElementById('weightLabel');
            const heightLabel = document.getElementById('heightLabel');
            const weightUnit = document.getElementById('weightUnit');
            const heightUnit = document.getElementById('heightUnit');
            const weight = document.getElementById('weight');
            const height = document.getElementById('height');
            const calculateBtn = document.getElementById('calculateBtn');
            const resetBtn = document.getElementById('resetBtn');
            const copyResult = document.getElementById('copyResult');
            const bmiValue = document.getElementById('bmiValue');
            const bmiCategory = document.getElementById('bmiCategory');
            const idealWeightRange = document.getElementById('idealWeightRange');
            const healthInsights = document.getElementById('healthInsights');
            
            let bmiChart = null;
            
            // Measurement system change handler
            function updateMeasurementSystem() {
                const isMetric = metricSystem.checked;
                
                weightLabel.textContent = isMetric ? 'Weight (kg)' : 'Weight (lbs)';
                heightLabel.textContent = isMetric ? 'Height (cm)' : 'Height (in)';
                weightUnit.textContent = isMetric ? 'kg' : 'lbs';
                heightUnit.textContent = isMetric ? 'cm' : 'in';
                
                // Convert values if needed
                if (weight.value && height.value) {
                    if (isMetric) {
                        // Convert from imperial to metric
                        weight.value = (parseFloat(weight.value) * 0.453592).toFixed(1);
                        height.value = (parseFloat(height.value) * 2.54).toFixed(1);
                    } else {
                        // Convert from metric to imperial
                        weight.value = (parseFloat(weight.value) * 2.20462).toFixed(1);
                        height.value = (parseFloat(height.value) * 0.393701).toFixed(1);
                    }
                }
            }
            
            metricSystem.addEventListener('change', updateMeasurementSystem);
            imperialSystem.addEventListener('change', updateMeasurementSystem);
            
            // Calculate BMI
            function calculateBMI() {
                const weightValue = parseFloat(weight.value);
                const heightValue = parseFloat(height.value);
                
                if (!weightValue || !heightValue) {
                    alert('Please enter both weight and height');
                    return;
                }
                
                let bmi;
                const isMetric = metricSystem.checked;
                
                if (isMetric) {
                    // Metric calculation: weight (kg) / height (m)²
                    bmi = weightValue / Math.pow(heightValue / 100, 2);
                } else {
                    // Imperial calculation: (weight (lbs) / height (in)²) * 703
                    bmi = (weightValue / Math.pow(heightValue, 2)) * 703;
                }
                
                // Round to 1 decimal place
                bmi = Math.round(bmi * 10) / 10;
                
                // Determine BMI category
                let category, color, healthInfo, idealWeight;
                
                if (bmi < 18.5) {
                    category = 'Underweight';
                    color = 'info';
                    healthInfo = 'You may be at risk for nutritional deficiencies and health problems. Consider consulting a healthcare provider about healthy ways to gain weight.';
                } else if (bmi < 25) {
                    category = 'Normal weight';
                    color = 'success';
                    healthInfo = 'You are in a healthy weight range. Continue maintaining a balanced diet and regular physical activity.';
                } else if (bmi < 30) {
                    category = 'Overweight';
                    color = 'warning';
                    healthInfo = 'You may be at increased risk for health problems. Consider making lifestyle changes to achieve a healthier weight.';
                } else {
                    category = 'Obese';
                    color = 'danger';
                    healthInfo = 'You are at higher risk for health problems. Consult a healthcare provider about strategies for weight management.';
                }
                
                // Calculate ideal weight range
                const heightInMeters = isMetric ? heightValue / 100 : heightValue * 0.0254;
                const minIdealWeight = (18.5 * Math.pow(heightInMeters, 2)).toFixed(1);
                const maxIdealWeight = (24.9 * Math.pow(heightInMeters, 2)).toFixed(1);
                
                if (isMetric) {
                    idealWeight = `${minIdealWeight} - ${maxIdealWeight} kg`;
                } else {
                    idealWeight = `${(minIdealWeight * 2.20462).toFixed(1)} - ${(maxIdealWeight * 2.20462).toFixed(1)} lbs`;
                }
                
                // Update results
                bmiValue.textContent = bmi;
                bmiValue.className = `text-${color}`;
                bmiCategory.textContent = category;
                idealWeightRange.textContent = `Your ideal weight range is ${idealWeight}`;
                
                // Update health insights
                healthInsights.innerHTML = `
                    <p>${healthInfo}</p>
                    <p><strong>Health Risks:</strong> ${getHealthRisks(category)}</p>
                    <p><strong>Recommendations:</strong> ${getRecommendations(category)}</p>
                `;
                
                // Update BMI chart
                updateBMIChart(bmi, category, color);
            }
            
            // Get health risks based on BMI category
            function getHealthRisks(category) {
                switch(category) {
                    case 'Underweight':
                        return 'Nutritional deficiencies, weakened immune system, osteoporosis, anemia';
                    case 'Normal weight':
                        return 'Lower risk of weight-related health problems';
                    case 'Overweight':
                        return 'Increased risk of high blood pressure, type 2 diabetes, heart disease';
                    case 'Obese':
                        return 'High risk of cardiovascular disease, type 2 diabetes, sleep apnea, certain cancers';
                    default:
                        return 'Unknown';
                }
            }
            
            // Get recommendations based on BMI category
            function getRecommendations(category) {
                switch(category) {
                    case 'Underweight':
                        return 'Increase caloric intake with nutrient-dense foods, strength training to build muscle mass';
                    case 'Normal weight':
                        return 'Maintain balanced diet, regular physical activity, monitor weight changes';
                    case 'Overweight':
                        return 'Reduce caloric intake, increase physical activity, focus on portion control';
                    case 'Obese':
                        return 'Consult healthcare provider, consider structured weight management program, increase physical activity';
                    default:
                        return 'Unknown';
                }
            }
            
            // Create or update BMI chart
            function updateBMIChart(bmi, category, color) {
                const ctx = document.getElementById('bmiChart').getContext('2d');
                
                // Destroy existing chart if it exists
                if (bmiChart) {
                    bmiChart.destroy();
                }
                
                // Create new chart
                bmiChart = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Underweight', 'Normal', 'Overweight', 'Obese'],
                        datasets: [{
                            label: 'BMI Range',
                            data: [18.5, 24.9, 29.9, 40],
                            backgroundColor: [
                                'rgba(13, 110, 253, 0.5)',
                                'rgba(25, 135, 84, 0.5)',
                                'rgba(255, 193, 7, 0.5)',
                                'rgba(220, 53, 69, 0.5)'
                            ],
                            borderColor: [
                                'rgba(13, 110, 253, 1)',
                                'rgba(25, 135, 84, 1)',
                                'rgba(255, 193, 7, 1)',
                                'rgba(220, 53, 69, 1)'
                            ],
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 40,
                                title: {
                                    display: true,
                                    text: 'BMI'
                                }
                            }
                        },
                        plugins: {
                            annotation: {
                                annotations: {
                                    line1: {
                                        type: 'line',
                                        yMin: bmi,
                                        yMax: bmi,
                                        borderColor: 'rgba(0, 0, 0, 0.8)',
                                        borderWidth: 2,
                                        label: {
                                            content: 'Your BMI: ' + bmi,
                                            enabled: true
                                        }
                                    }
                                }
                            }
                        }
                    }
                });
            }
            
            // Calculate button click handler
            calculateBtn.addEventListener('click', calculateBMI);
            
            // Reset button click handler
            resetBtn.addEventListener('click', function() {
                weight.value = '';
                height.value = '';
                bmiValue.textContent = '--';
                bmiValue.className = '';
                bmiCategory.textContent = 'Enter your measurements to calculate BMI';
                idealWeightRange.textContent = 'Enter your measurements to see your ideal weight range';
                healthInsights.innerHTML = '<p class="mb-0">Enter your measurements to get health insights</p>';
                
                if (bmiChart) {
                    bmiChart.destroy();
                    bmiChart = null;
                }
            });
            
            // Copy result button click handler
            copyResult.addEventListener('click', function() {
                if (bmiValue.textContent === '--') {
                    return;
                }
                
                const textToCopy = `BMI: ${bmiValue.textContent}\nCategory: ${bmiCategory.textContent}\nIdeal Weight Range: ${idealWeightRange.textContent}`;
                navigator.clipboard.writeText(textToCopy).then(() => {
                    const originalText = this.innerHTML;
                    this.innerHTML = '<i class="fas fa-check"></i> Copied!';
                    setTimeout(() => {
                        this.innerHTML = originalText;
                    }, 2000);
                });
            });
            
            // Input validation
            document.querySelectorAll('input[type="number"]').forEach(input => {
                input.addEventListener('input', function() {
                    if (this.value === '') return;
                    const value = parseFloat(this.value);
                    if (isNaN(value) || value <= 0) {
                        this.value = '';
                    }
                });
            });
        });
    </script>
</body>
</html> 